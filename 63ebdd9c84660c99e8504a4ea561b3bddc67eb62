{
  "comments": [
    {
      "key": {
        "uuid": "06f44ab6_8b9ed66a",
        "filename": "playbooks/add_image_to_glance.yaml",
        "patchSetId": 9
      },
      "lineNbr": 13,
      "author": {
        "id": 200
      },
      "writtenOn": "2018-11-07T10:05:01Z",
      "side": 1,
      "message": "Small nit: while this will work fine, we should use \"remote_src: yes\" instead of \"copy: no\", since this option is deprecated in Ansible. See https://docs.ansible.com/ansible/2.6/modules/unarchive_module.html",
      "range": {
        "startLine": 13,
        "startChar": 8,
        "endLine": 13,
        "endChar": 16
      },
      "revId": "63ebdd9c84660c99e8504a4ea561b3bddc67eb62",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b58852fc_754d1792",
        "filename": "playbooks/add_image_to_glance.yaml",
        "patchSetId": 9
      },
      "lineNbr": 47,
      "author": {
        "id": 22
      },
      "writtenOn": "2018-11-06T17:14:10Z",
      "side": 1,
      "message": "This task should be the first executed and the playbook should stop if the image exists",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 47,
        "endChar": 24
      },
      "revId": "63ebdd9c84660c99e8504a4ea561b3bddc67eb62",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1860ffa5_c6c2b252",
        "filename": "playbooks/add_image_to_glance.yaml",
        "patchSetId": 9
      },
      "lineNbr": 47,
      "author": {
        "id": 6
      },
      "writtenOn": "2018-11-07T09:15:54Z",
      "side": 1,
      "message": "What if we want to update the image ? The image is already into glance and we want to re-upload ? Should we have a \"force\" extra_var to, if set to true (false by default): removes the image from glance (state: absent) then uploads image to glance (state: present).\nThat\u0027s true this mechanic must be done first.\n\nBut well, I think for this patch that\u0027s fine. We\u0027ll be able to iterate on it later. So for now I think you can remove the Verify presence task.",
      "parentUuid": "b58852fc_754d1792",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 47,
        "endChar": 24
      },
      "revId": "63ebdd9c84660c99e8504a4ea561b3bddc67eb62",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dcd3d656_23724e8a",
        "filename": "playbooks/add_image_to_glance.yaml",
        "patchSetId": 9
      },
      "lineNbr": 47,
      "author": {
        "id": 22
      },
      "writtenOn": "2018-11-07T16:43:10Z",
      "side": 1,
      "message": "It\u0027s not easy to manage update. We got issue when deleting previous image. Normally we should not have to update image because we use version provides by centos https://softwarefactory-project.io/cgit/config/tree/nodepool/rdo-cloud.yaml#n121",
      "parentUuid": "1860ffa5_c6c2b252",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 47,
        "endChar": 24
      },
      "revId": "63ebdd9c84660c99e8504a4ea561b3bddc67eb62",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "beb25481_876107dc",
        "filename": "playbooks/add_image_to_glance.yaml",
        "patchSetId": 9
      },
      "lineNbr": 47,
      "author": {
        "id": 6
      },
      "writtenOn": "2018-11-08T09:46:26Z",
      "side": 1,
      "message": "@nhicher ok got it. Btw I like this feature where we cannot remove an image from glance (\\o/).\n\n@zoli: So please keep the verify presence task but put it as the first task then use block (https://docs.ansible.com/ansible/2.6/user_guide/playbooks_blocks.html) with the when: presence is failed where you include all other tasks.",
      "parentUuid": "dcd3d656_23724e8a",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 47,
        "endChar": 24
      },
      "revId": "63ebdd9c84660c99e8504a4ea561b3bddc67eb62",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    }
  ]
}